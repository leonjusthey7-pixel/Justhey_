<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flor de Arcilla | Checkout Seguro</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root {
  --primary:#594D47;
  --secondary:#EADCD1;
  --accent:#A5A58D;
  --bg:#FDFCFB;
}
body{
  font-family:'Inter',sans-serif;
  background:var(--bg);
  color:var(--primary);
}
.font-serif{font-family:'Playfair Display',serif}
.input-field{
  width:100%;
  padding:.75rem;
  border:1px solid #D1D5DB;
  border-radius:.5rem;
}
.method-card.active{
  border-color:var(--primary);
  background:#F8F4EF;
}
.btn-primary{
  background:var(--primary);
  color:white;
  padding:1rem;
  border-radius:.5rem;
  width:100%;
}
.hidden{display:none}
</style>
</head>

<body class="min-h-screen flex flex-col">

<nav class="p-6 flex justify-between bg-white shadow-sm">
<h1 class="font-serif text-2xl">Flor de Arcilla</h1>
<a href="productos.html" class="text-sm font-semibold">‚Üê Volver</a>
</nav>

<main class="flex-grow flex items-center justify-center p-4">

<!-- LOGIN -->
<div id="login-section" class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md">
<h2 class="font-serif text-3xl mb-4 text-center">Mi Cuenta</h2>
<form onsubmit="event.preventDefault(); showSection();">
<input type="email" placeholder="Correo" class="input-field mb-4" required>
<input type="password" placeholder="Contrase√±a" class="input-field mb-4" required>
<button class="btn-primary">Continuar al Pago</button>
</form>
</div>

<!-- PAGO -->
<div id="payment-section" class="hidden bg-white p-8 rounded-3xl shadow-2xl w-full max-w-4xl">

<div class="grid grid-cols-1 lg:grid-cols-2 gap-12">

<!-- RESUMEN -->
<div>
<h2 class="font-serif text-2xl mb-4">Tu Pedido</h2>
<div id="resumen-productos" class="space-y-4"></div>

<div class="mt-6 bg-gray-50 p-4 rounded-xl">
<div class="flex justify-between"><span>Subtotal</span>$<span id="subtotal">0.00</span></div>
<div class="flex justify-between font-bold mt-2"><span>Total</span>$<span id="total">0.00</span></div>
</div>
</div>

<!-- FORMULARIO -->
<div class="bg-[#FDFCFB] p-6 rounded-2xl border">

<h2 class="font-serif text-2xl mb-4 text-[#EBC03F]">Datos del Cliente</h2>

<input id="nombreCliente" type="text" placeholder="Nombre" class="input-field mb-3" required>
<input id="apellidoCliente" type="text" placeholder="Apellido" class="input-field mb-3" required>
<textarea id="direccionCliente" rows="3" placeholder="Direcci√≥n de entrega" class="input-field mb-6" required></textarea>

<h2 class="font-serif text-xl mb-2 text-[#EBC03F]">Banco Pichincha</h2>

<div class="bg-white p-4 rounded-xl text-sm mb-4">
<p><b>Nombre:</b> Flor de Arcilla S.A.</p>
<p><b>Cuenta:</b> 2200000000</p>
</div>

<button class="btn-primary" onclick="enviarPedidoWhatsApp()">Confirmar pedido</button>

</div>
</div>
</div>

</main>

<footer class="p-4 text-center text-xs text-gray-400">
¬© 2024 Flor de Arcilla
</footer>

<script>
const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
const contenedor = document.getElementById("resumen-productos");
const subtotalHTML = document.getElementById("subtotal");
const totalHTML = document.getElementById("total");

let subtotal = 0;

carrito.forEach(p => {
  subtotal += p.precio * p.cantidad;
  contenedor.innerHTML += `
  <div>
    <p class="font-bold">${p.nombre}</p>
    <p class="text-sm">Cantidad: ${p.cantidad}</p>
    <p>$${(p.precio * p.cantidad).toFixed(2)}</p>
  </div>`;
});

subtotalHTML.textContent = subtotal.toFixed(2);
totalHTML.textContent = subtotal.toFixed(2);

function showSection(){
  document.getElementById("login-section").classList.add("hidden");
  document.getElementById("payment-section").classList.remove("hidden");
}

const telefonoWhatsApp = "593981706677";

function enviarPedidoWhatsApp(){
  const nombre = document.getElementById("nombreCliente").value.trim();
  const apellido = document.getElementById("apellidoCliente").value.trim();
  const direccion = document.getElementById("direccionCliente").value.trim();

  if(!nombre || !apellido || !direccion){
    alert("Completa los datos del cliente");
    return;
  }

  let mensaje = `üåø *Nuevo pedido - Flor de Arcilla* üåø\n\n`;
  mensaje += `üë§ Cliente: ${nombre} ${apellido}\n`;
  mensaje += `üìç Direcci√≥n: ${direccion}\n\n`;

  carrito.forEach((p,i)=>{
    mensaje += `${i+1}. ${p.nombre}\nCantidad: ${p.cantidad}\nPrecio: $${p.precio}\n\n`;
  });

  mensaje += `üí∞ Total: $${subtotal.toFixed(2)}`;

  window.open(`https://wa.me/${telefonoWhatsApp}?text=${encodeURIComponent(mensaje)}`, "_blank");
  localStorage.removeItem("carrito");
}
</script>

</body>
</html>
